var UIAnimations=new Phaser.Class({initialize:function(a){this.scene=a},moveUp:function(a,b,c,d){this.scene.tweens.add({targets:a,y:b,duration:c,delay:d,ease:"Sine.easeOut"})},fadeIn:function(a){this.scene.tweens.add({targets:a,alpha:1,duration:750,ease:"Sine.easeOut"})},growIn:function(a){this.scene.tweens.add({targets:a,scaleX:1,scaleY:1,duration:750,ease:"Sine.easeOut"})},fallDown:function(a){this.scene.tweens.add({targets:a,y:a.y+a.height,duration:750,ease:"Sine.easeOut"})},fadeIn2:function(a){this.scene.tweens.add({targets:a,alpha:1,duration:750,delay:750,ease:"Sine.easeOut"})}});var Button=new Phaser.Class({Extends:Phaser.GameObjects.Image,initialize:function(a,b,c,d){Phaser.GameObjects.Image.call(this,a),this.image=b,this.setTexture("spritesheet",b).setInteractive().setPosition(c,d).on("pointerover",()=>this.buttonHoverState(this)).on("pointerout",()=>this.buttonNormalState(this))},buttonHoverState:function(a){a.setTint(3355443)},buttonNormalState:function(a){a.clearTint()}});var Game=new Phaser.Class({Extends:Phaser.Scene,initialize:function(){Phaser.Scene.call(this,{key:"game"}),window.GAME=this,this.numOfCards=32,this.cardsGrid=[],this.playerBoops=[],this.playerScores=[],this.currentPlayer=0,this.timerText,this.timedEvent,this.timeElapsedInSeconds=0,this.totalSelected=0},init:function(a){this.numPlayers=a.numOfPlayers},preload:function(){this.load.setPath("Assets"),this.load.multiatlas("spritesheet","MatchTheBoop.json"),this.load.image("circle","Circle.png")},create:function(){globalScene=this,currentChosen=null;var a=this.add.image(game.config.width/2,game.config.height/2,"spritesheet","background_base.png");a.setDisplaySize(game.config.width,game.config.height);var b=this.add.image(game.config.width/2,0,"spritesheet","ui_timer.png");b.y+=b.displayHeight/2,this.timerText=this.add.text(b.x,b.y,"0:00",{font:"24px Courier",fill:"#FFFFFF"}),this.timerText.setOrigin(.5,0),this.timedEvent=this.time.addEvent({delay:1e3,callback:function(){this.timeElapsedInSeconds++},callbackScope:this,loop:!0});for(var c=0;c<this.numPlayers;c++){var d=game.config.width/(this.numPlayers+1),e=0==c?"player_highlight_"+(c+1)+".png":"player_"+(c+1)+".png",f=this.add.image(d*(c+1),game.config.height-75,"spritesheet",e);this.playerBoops.push(f);var g=this.add.text(f.x+50,f.y,0,{font:"32px Courier",fill:"#FFFFFF"});this.playerScores.push(g)}for(var h=[],c=1;16>=c;c++)num=("0"+c).slice(-2),h.push("photo_"+num+".png");var j=this.make.group({classType:Phaser.GameObjects.Image,key:"spritesheet",frame:"photo_back.png",frameQuantity:this.numOfCards,setScale:{x:1,y:1},gridAlign:{width:8,height:4,cellWidth:95,cellHeight:95,position:Phaser.Display.Align.CENTER,x:150,y:150}}),k=this.make.group({classType:Phaser.GameObjects.Image,key:"spritesheet",frame:h,randomFrame:!0,frameQuantity:2,max:this.numOfCards,setScale:{x:0,y:0},gridAlign:{width:8,height:4,cellWidth:95,cellHeight:95,position:Phaser.Display.Align.CENTER,x:150,y:150}});placeholderGroupChildren=j.getChildren(),itemsChildren=k.getChildren(),j.children.iterate(function(a,b){a.id=~~(b/2),a.referenceItem=itemsChildren[b]}),j.children.iterate(function(a){var b=Phaser.Math.Between(0,placeholderGroupChildren.length-1),c=placeholderGroupChildren[b],d=c.x,e=c.y;c.setPosition(a.x,a.y),c.referenceItem.setPosition(a.x,a.y),a.setPosition(d,e),a.referenceItem.setPosition(d,e)}),this.input.setHitArea(j.getChildren()).on("gameobjectover",function(a,b){b.setTint(16711680)}),this.input.setHitArea(j.getChildren()).on("gameobjectout",function(a,b){b.clearTint()}),this.input.setHitArea(j.getChildren()).on("gameobjectdown",function(a,b){globalScene.tweens.add({targets:b.referenceItem,scaleX:1,scaleY:1,duration:500,ease:"Sine.easeOut"}),null===currentChosen?currentChosen=b:(currentChosen.id==b.id?(currentChosen.setVisible(!1),b.setVisible(!1),globalScene.increaseScore()):globalScene.tweens.add({targets:[b.referenceItem,currentChosen.referenceItem],scaleX:0,scaleY:0,duration:500,ease:"Sine.easeOut",delay:1e3,onComplete:globalScene.nextPlayer()}),currentChosen=null)})},nextPlayer:function(){this.playerBoops[this.currentPlayer].setTexture("spritesheet","player_"+(this.currentPlayer+1)+".png"),this.currentPlayer=this.currentPlayer==this.numPlayers-1?0:this.currentPlayer+1,this.playerBoops[this.currentPlayer].setTexture("spritesheet","player_highlight_"+(this.currentPlayer+1)+".png")},increaseScore:function(){var a=this.playerScores[this.currentPlayer],b=parseInt(a._text);if(a.setText(++b),++this.totalSelected==this.numOfCards/2){var c=[];this.playerScores.forEach(function(a){c.push(parseInt(a._text))});var d=Math.max(...c),e=c.indexOf(d)+1;this.scene.start("gameover",{winner:e,score:d})}},update:function(){var a=("0"+this.timeElapsedInSeconds%60).slice(-2),b=("0"+~~(this.timeElapsedInSeconds/60)).slice(-2);this.timerText.setText(b+":"+a)}});var GameOver=new Phaser.Class({Extends:Phaser.Scene,initialize:function(){Phaser.Scene.call(this,{key:"gameover"}),window.OVER=this},init:function(a){this.score=a.score,this.winner=a.winner},create:function(){var a=this.add.image(game.config.width/2,game.config.height/2,"spritesheet","background_base.png");a.setDisplaySize(game.config.width,game.config.height);var b=this.add.image(game.config.width/2,game.config.height/2.5,"spritesheet","ui_game_win.png"),c=this.add.text(game.config.width/2,b.y-100,"Your score: "+this.score,{font:"32px Courier",fill:"#00ff00"});c.setOrigin(.5),c.setAlpha(0);var d=this.add.sprite(game.config.width/2,game.config.height/1.9,"spritesheet","player_"+this.winner+"_win.png");d.setAlpha(0);var e=this.children.add(new Button(this,"btn_replay.png",game.config.width/2.4,game.config.height+100));e.on("pointerdown",()=>this.startGame());var f=this.children.add(new Button(this,"btn_menu.png",game.config.width/1.7,game.config.height+100));f.on("pointerdown",()=>this.openMenu()),b.setScale(0,0);var g=new UIAnimations(this);g.growIn(b),g.fadeIn2(d),g.fadeIn2(c),g.moveUp(e,game.config.height/1.425,500,750),g.moveUp(f,game.config.height/1.425,500,900);var h=localStorage.getItem("memorygame_highscore");(null===h||this.score>h)&&localStorage.setItem("memorygame_highscore",this.score)},startGame:function(){this.scene.start("game")},openMenu:function(){this.scene.start("mainmenu")}});var HighScores=new Phaser.Class({Extends:Phaser.Scene,initialize:function(){Phaser.Scene.call(this,{key:"highscores"}),window.OVER=this},init:function(a){this.score=a.score},create:function(){var a=this.add.image(game.config.width/2,game.config.height/2,"spritesheet","Slicing-01.png");a.setDisplaySize(game.config.width,game.config.height);var b=this.add.image(game.config.width/2,game.config.height/2.5,"spritesheet","Slicing-90.png"),c=this.add.image(game.config.width/2,0,"spritesheet","Slicing-89.png");c.y+=c.displayHeight/2;var d=this.add.text(game.config.width/2,b.y-b.displayHeight/4,"Your score: "+this.score,{font:"32px Courier",fill:"#00ff00"});d.setOrigin(.5),d.setAlpha(0);var e=this.add.sprite(game.config.width/2,b.y+b.displayHeight/4,"spritesheet","Slicing-91.png");e.displayHeight=game.config.height/5,e.displayWidth=e.height/1.1,e.setAlpha(0);const f=this.add.sprite(game.config.width/2,game.config.height/1.3,"spritesheet","Slicing-100.png").setInteractive().on("pointerdown",()=>this.startGame()).on("pointerover",()=>this.enterButtonHoverState(f)).on("pointerout",()=>this.enterButtonRestState(f));b.setScale(0,0),c.y-=c.height,this.animation_growIn(b),this.animation_fallDown(c),this.animation_fadeIn(e),this.animation_fadeIn(d),this.animation_moveUp(f)},startGame:function(){this.scene.start("game")},enterButtonHoverState:function(a){a.setScale(1.2,1.2)},enterButtonRestState:function(a){a.setScale(1,1)},animation_growIn:function(a){this.tweens.add({targets:a,scaleX:1,scaleY:1,duration:750,ease:"Sine.easeOut"})},animation_fallDown:function(a){this.tweens.add({targets:a,y:a.y+a.height,duration:750,ease:"Sine.easeOut"})},animation_fadeIn:function(a){this.tweens.add({targets:a,alpha:1,duration:750,delay:750,ease:"Sine.easeOut"})},animation_moveUp:function(a){this.tweens.add({targets:a,y:{getStart:()=>game.config.height,getEnd:()=>a.y},duration:750,ease:"Sine.easeOut"})}});var HowToPlay=new Phaser.Class({Extends:Phaser.Scene,initialize:function(){Phaser.Scene.call(this,{key:"howtoplay"}),window.OVER=this},init:function(a){this.numOfPlayers=a.numOfPlayers},create:function(){var a=this.add.image(game.config.width/2,game.config.height/2,"spritesheet","background_base.png");a.setDisplaySize(game.config.width,game.config.height);var a=this.add.image(game.config.width/2,game.config.height/2,"spritesheet","screen_tutorial.png"),b=this.children.add(new Button(this,"btn_start.png",game.config.width/2,game.config.height+100));b.on("pointerdown",()=>this.startGame());var c=new UIAnimations(this);c.moveUp(b,game.config.height/1.15,250,0)},startGame:function(){this.scene.start("game",{numOfPlayers:this.numOfPlayers})}});var MainMenu=new Phaser.Class({Extends:Phaser.Scene,initialize:function(){Phaser.Scene.call(this,{key:"mainmenu"}),window.OVER=this},create:function(){var a=this.add.image(game.config.width/2,game.config.height/2,"spritesheet","background_base.png");a.setDisplaySize(game.config.width,game.config.height);var b=this.add.image(game.config.width/4,game.config.height/2.5,"spritesheet","title.png");b.setAlpha(0);var c=this.children.add(new Button(this,"btn_start.png",game.config.width/1.4,game.config.height+100));c.on("pointerdown",()=>this.startGame());var d=this.children.add(new Button(this,"btn_high_scores.png",game.config.width/1.4,game.config.height+100));d.on("pointerdown",()=>this.highScores());var e=this.children.add(new Button(this,"btn_more_games.png",game.config.width/1.4,game.config.height+100));e.on("pointerdown",()=>this.moreGames());var f=new UIAnimations(this);f.fadeIn(b),f.moveUp(c,game.config.height/4.9,250,0),f.moveUp(d,game.config.height/2.5,250,250),f.moveUp(e,game.config.height/1.7,250,500);var g=localStorage.getItem("memorygame_highscore");if(null!==g){var h=this.add.text(game.config.width/1.5,game.config.height/1.1,"High Score",{font:"32px Courier",fill:"#00ff33"});h.setOrigin(.5),h.setAlpha(0),f.fadeIn2(h);var j=this.add.text(h.x+150,h.y,g,{font:"32px Courier",fill:"#FFFFFF"});j.setOrigin(.5),j.setAlpha(0),f.fadeIn2(j)}var k=this.add.text(game.config.width/4,game.config.height/1.1,"www.planetboop.com",{font:"20px Courier",fill:"#FFFFFF"});k.setOrigin(.5),k.setAlpha(0),f.fadeIn2(k)},startGame:function(){this.scene.start("selectplayers")},highScores:function(){this.scene.start("highscores")},moreGames:function(){window.open("http://planetboop.com","_blank")}});var SelectPlayers=new Phaser.Class({Extends:Phaser.Scene,initialize:function(){Phaser.Scene.call(this,{key:"selectplayers"}),window.OVER=this},create:function(){globalScene=this;var a=this.add.image(game.config.width/2,game.config.height/2,"spritesheet","background_base.png");a.setDisplaySize(game.config.width,game.config.height);var b=this.add.image(game.config.width/2,0,"spritesheet","ui_textbar.png");for(b.y+=b.displayHeight/2,this.add.text(b.x,b.y,"SELECT PLAYERS",{font:"24px Courier",fill:"#FFFFFF"}).setOrigin(.5,0),i=1;5>i;i++){const a=i;this.children.add(new Button(this,"photo_"+(20-i)+".png",game.config.width/5*i,game.config.height/2)).on("pointerdown",()=>globalScene.startGame(a))}var c=this.children.add(new Button(this,"btn_continue.png",game.config.width/2,game.config.height+100));c.on("pointerdown",()=>this.startGame());var d=this.children.add(new Button(this,"btn_arrow.png",100,100));d.on("pointerdown",()=>this.returnToMenu());var e=new UIAnimations(this);e.moveUp(c,game.config.height/1.15,250,0)},startGame:function(a){this.scene.start("howtoplay",{numOfPlayers:a})},returnToMenu:function(){this.scene.start("mainmenu")}});function resize(){var a=document.querySelector("canvas"),b=window.innerWidth,c=window.innerHeight,d=game.config.width/game.config.height;b/c<d?(a.style.width=b+"px",a.style.height=b/d+"px"):(a.style.width=c*d+"px",a.style.height=c+"px")}window.onload=function(){var a={type:Phaser.AUTO,width:950,height:650,physics:{default:"arcade"},scene:[Preloader,MainMenu,SelectPlayers,HowToPlay,Game,GameOver]};game=new Phaser.Game(a),resize(),window.addEventListener("resize",resize,!1)};var Preloader=new Phaser.Class({Extends:Phaser.Scene,initialize:function(){Phaser.Scene.call(this,{key:"preloader"})},preload:function(){this.load.setPath("Assets"),this.load.multiatlas("spritesheet","MatchTheBoop.json")},create:function(){this.scene.start("mainmenu")}});